{
  "metadata": {
    "chip": "Apple M5",
    "variant": "M5 / M5 Pro / M5 Max",
    "release_date": "2025-10",
    "optimization_version": "1.0.0",
    "target_os": "macOS 15.2+",
    "last_updated": "2025-12-22"
  },

  "m5_specifications": {
    "base_config": {
      "p_cores": 4,
      "e_cores": 6,
      "gpu_cores": 10,
      "neural_engine": "16-core",
      "memory_bandwidth_gbps": 153,
      "process_node": "3nm N3P"
    },
    "frequency_limits": {
      "p_core_min_ghz": 1.26,
      "p_core_boost_ghz": 4.42,
      "e_core_min_ghz": 1.02,
      "e_core_boost_ghz": 2.85
    },
    "power_tdp": {
      "base_w": 27,
      "sustained_w": 35,
      "boost_w": 40
    },
    "thermal": {
      "max_junction_c": 114,
      "throttle_onset_c": 100,
      "safe_sustained_c": 85
    }
  },

  "power_model_m5": {
    "formula": "P = C × f × V²",
    "p_core_coefficients": {
      "capacitance_f": 1.2e-10,
      "nominal_voltage_v": 1.01,
      "nominal_frequency_ghz": 4.1,
      "nominal_power_w": 4.1
    },
    "e_core_coefficients": {
      "capacitance_f": 8.0e-11,
      "nominal_voltage_v": 0.82,
      "nominal_frequency_ghz": 2.6,
      "nominal_power_w": 1.3
    },
    "leakage_power_w": 1.0,
    "leakage_temp_coefficient_w_per_c": 0.008
  },

  "qigong_dvfs_profiles": {
    "red_team_stealth": {
      "description": "Minimal power footprint for undetected operation",
      "p_cores_active": 0,
      "e_cores_active": 4,
      "frequency_ghz": 1.5,
      "voltage_v": 0.68,
      "total_power_w": 2.4,
      "thermal_impact": "none",
      "taskpolicy": "sudo taskpolicy -b -p <pid>",
      "comments": "Background QoS class, minimal thermal signature"
    },
    "red_team_moderate": {
      "description": "Balanced operation while remaining under 6W budget",
      "p_cores_active": 0,
      "e_cores_active": 6,
      "frequency_ghz": 2.0,
      "voltage_v": 0.75,
      "total_power_w": 5.4,
      "thermal_impact": "low",
      "taskpolicy": "sudo taskpolicy -b -p <pid>"
    },
    "blue_team_detection": {
      "description": "Sustained detection workload with optimal power/performance",
      "p_cores_active": 4,
      "e_cores_active": 0,
      "frequency_ghz": 4.1,
      "voltage_v": 1.01,
      "total_power_w": 20.0,
      "thermal_impact": "moderate",
      "taskpolicy": "sudo taskpolicy -B -p <pid>",
      "comments": "User-interactive QoS class (25)"
    },
    "system_balanced": {
      "description": "Mixed workload, general purpose computing",
      "p_cores_active": 2,
      "e_cores_active": 4,
      "p_freq_ghz": 3.0,
      "e_freq_ghz": 2.2,
      "total_power_w": 10.0,
      "thermal_impact": "minimal",
      "taskpolicy": "default"
    }
  },

  "thermal_budget": {
    "maximum_sustained_allocation": {
      "total_power_w": 35,
      "red_team_w": 5.0,
      "blue_team_w": 20.0,
      "system_baseline_w": 6.0,
      "reserve_headroom_w": 4.0
    },
    "performance_sustained_allocation": {
      "total_power_w": 27,
      "red_team_w": 3.0,
      "blue_team_w": 15.0,
      "system_baseline_w": 6.0,
      "reserve_headroom_w": 3.0
    }
  },

  "environment_variables_for_qigong": {
    "QIGONG_CHIP": "M5",
    "QIGONG_P_CORES": "4",
    "QIGONG_E_CORES": "6",
    "QIGONG_THERMAL_BUDGET_WATTS": "35",
    "QIGONG_SAFE_SUSTAINED_TEMP_C": "85",
    "QIGONG_THROTTLE_ONSET_TEMP_C": "100",
    "QIGONG_P_CORE_CAPACITANCE_F": "1.2e-10",
    "QIGONG_E_CORE_CAPACITANCE_F": "8.0e-11",
    "QIGONG_RED_TEAM_MAX_POWER_W": "6.0",
    "QIGONG_BLUE_TEAM_MAX_POWER_W": "20.0",
    "QIGONG_CACHE_LINE_BYTES": "128"
  },

  "comparison_m1_to_m5": {
    "frequency_improvement": "M1: 3.23 GHz → M5: 4.42 GHz (+37%)",
    "power_efficiency": "M1: 45 GFLOPS/W → M5: 75 GFLOPS/W (+67%)",
    "memory_bandwidth": "M1: 68 GB/s → M5: 153 GB/s (+125%)",
    "process_node": "M1: 5nm → M5: 3nm N3P",
    "cache_l2": "M1: 16 MB P-core → M5: 64 MB P-core (+300%)",
    "architectural_shift": "M1: CPU-first → M5: AI-first (Neural Accelerators per GPU core)"
  },

  "key_optimizations_for_qigong": {
    "optimization_1": "Use E-cores exclusively for red team (stealth) - 4 E-cores @ 1.5 GHz = 2.4W",
    "optimization_2": "Allocate P-cores for blue team (detection) - 4 P-cores @ 4.1 GHz = 20W",
    "optimization_3": "Exploit M5's 64 MB P-core L2 cache for faster threat detection",
    "optimization_4": "Use thermal prediction models before throttling (100°C threshold)",
    "optimization_5": "Leverage 153 GB/s memory bandwidth for parallel threat analysis",
    "optimization_6": "QoS steering (taskpolicy) is 2x more efficient than manual DVFS",
    "optimization_7": "Total power budget: 35W sustained (27W base), split 6W red / 20W blue"
  },

  "measurement_strategy": {
    "primary_tool": "powermetrics",
    "alternate_tools": ["socpowerbud", "fluidtop"],
    "key_metrics": [
      "cpu_power (watts)",
      "gpu_power (watts)",
      "ane_power (watts - neural accelerator)",
      "thermal_pressure (0.0-1.0)",
      "cpu_die_temperature_avg_100ms (celsius)"
    ],
    "sampling_interval_sec": 1,
    "baseline_duration_sec": 60,
    "measurement_overhead": "Negligible (<1% CPU)"
  }
}
