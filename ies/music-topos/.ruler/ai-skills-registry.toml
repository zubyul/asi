# AI Skills Registry - Updated with Universal Propagation
# All skills now propagate to all agents
# Updated: 2025-12-21
#
# This registry defines:
# 1. Skills available for propagation (all to all agents)
# 2. MCP servers that provide tool capabilities
# 3. Agent configurations for skill distribution

[registry]
name = "music-topos-skills"
version = "0.70.0"
description = "AI Skills for categorical music composition and color dynamics - Universal Propagation Edition"
author = "barton"
seed = 1069
license = "MIT"

sources = [
  "https://github.com/barton/music-topos-skills",
  "https://github.com/skillcreatorai/ai-agent-skills",
  "https://github.com/intellectronica/ruler"
]

# ═══════════════════════════════════════════════════════════════════════════════
# ALL AGENTS - Universal Skill List
# ═══════════════════════════════════════════════════════════════════════════════

all_agents = ["codex", "claude", "amp", "cursor", "copilot"]

# ═══════════════════════════════════════════════════════════════════════════════
# SKILL DEFINITIONS - All to All Propagation
# ═══════════════════════════════════════════════════════════════════════════════

[skills.acsets]
name = "acsets"
version = "1.0.0"
description = "Abstract Chemical Sets"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.bdd-mathematical-verification]
name = "bdd-mathematical-verification"
version = "1.0.0"
description = "BDD Mathematical Verification"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.bisimulation-game]
name = "bisimulation-game"
version = "1.0.0"
description = "Bisimulation Game"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.bmorphism-stars]
name = "bmorphism-stars"
version = "1.0.0"
description = "B-Morphism Stars"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.borkdude]
name = "borkdude"
version = "1.0.0"
description = "ClojureScript Runtime Selection"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.cider-clojure]
name = "cider-clojure"
version = "1.0.0"
description = "CIDER Clojure Development"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.cider-embedding]
name = "cider-embedding"
version = "1.0.0"
description = "CIDER Embedding"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.clj-kondo-3color]
name = "clj-kondo-3color"
version = "1.0.0"
description = "clj-kondo 3-Color"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.codex-self-rewriting]
name = "codex-self-rewriting"
version = "1.0.0"
description = "Codex Self-Rewriting"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.crdt]
name = "crdt"
version = "1.0.0"
description = "CRDT Memoization System"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.duckdb-temporal-versioning]
name = "duckdb-temporal-versioning"
version = "1.0.0"
description = "DuckDB Temporal Versioning"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.epistemic-arbitrage]
name = "epistemic-arbitrage"
version = "1.0.0"
description = "Epistemic Arbitrage"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.frontend-design]
name = "frontend-design"
version = "1.0.0"
description = "Frontend Design"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.gay-mcp]
name = "gay-mcp"
version = "1.0.0"
description = "GAY.jl Deterministic Colors (MCP Server)"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.geiser-chicken]
name = "geiser-chicken"
version = "1.0.0"
description = "Geiser Chicken Scheme"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.glass-bead-game]
name = "glass-bead-game"
version = "1.0.0"
description = "Glass Bead Game (Hesse)"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.hatchery-papers]
name = "hatchery-papers"
version = "1.0.0"
description = "Hatchery Papers"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.mathpix-ocr]
name = "mathpix-ocr"
version = "1.0.0"
description = "Mathpix OCR"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.proofgeneral-narya]
name = "proofgeneral-narya"
version = "1.0.0"
description = "ProofGeneral Narya"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.rama-gay-clojure]
name = "rama-gay-clojure"
version = "1.0.0"
description = "Rama GAY Clojure"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.reafference-corollary-discharge]
name = "reafference-corollary-discharge"
version = "1.0.0"
description = "Reafference & Corollary Discharge (von Holst Neuroscience)"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.rubato-composer]
name = "rubato-composer"
version = "1.0.0"
description = "Rubato Composer"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.self-validation-loop]
name = "self-validation-loop"
version = "1.0.0"
description = "Self-Validation Loop"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.slime-lisp]
name = "slime-lisp"
version = "1.0.0"
description = "SLIME Lisp"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.spi-parallel-verify]
name = "spi-parallel-verify"
version = "1.0.0"
description = "SPI Parallel Verification"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.squint-runtime]
name = "squint-runtime"
version = "1.0.0"
description = "Squint Runtime"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.tailscale-file-transfer]
name = "tailscale-file-transfer"
version = "1.0.0"
description = "Tailscale File Transfer"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.three-match]
name = "three-match"
version = "1.0.0"
description = "3-Match (3-SAT via Subgraph Isomorphism)"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.triad-interleave]
name = "triad-interleave"
version = "1.0.0"
description = "Triad Interleave"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.unworld]
name = "unworld"
version = "1.0.0"
description = "Unworld (Replace Time with Color Chains)"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.unworlding-involution]
name = "unworlding-involution"
version = "1.0.0"
description = "Unworlding Involution"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.world-hopping]
name = "world-hopping"
version = "1.0.0"
description = "World Hopping"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

[skills.xenodium-elisp]
name = "xenodium-elisp"
version = "1.0.0"
description = "Xenodium Elisp"
propagate_to = ["codex", "claude", "amp", "cursor", "copilot"]

# ═══════════════════════════════════════════════════════════════════════════════
# MCP SERVER REGISTRY
# ═══════════════════════════════════════════════════════════════════════════════

[mcp_registry]
name = "music-topos-mcp"
description = "MCP servers for music-topos ecosystem"

# Local MCP Servers
[mcp_registry.servers.gay]
type = "local"
command = "julia"
args = ["--project=@gay", "-e", "using Gay; Gay.serve_mcp()"]
description = "Deterministic color generation"
capabilities = ["color_at", "palette", "golden_thread", "reafference", "loopy_strange"]

[mcp_registry.servers.glass-bead-game]
type = "local"
command = "ruby"
args = ["-I", "lib", "-r", "glass_bead_game", "-e", "GlassBeadGame.serve_mcp"]
description = "Glass Bead Game (Hesse)"
capabilities = ["move", "synthesis", "connection"]

# External MCP Servers
[mcp_registry.servers.firecrawl]
type = "npm"
package = "firecrawl-mcp"
description = "Web scraping and crawling"
capabilities = ["scrape", "crawl", "search", "extract"]

[mcp_registry.servers.exa]
type = "npm"
package = "@anthropic/exa-mcp-server"
description = "AI-powered web search"
capabilities = ["web_search", "crawl", "deep_search"]

[mcp_registry.servers.tree-sitter]
type = "uvx"
package = "mcp-tree-sitter"
description = "AST-based code analysis"
capabilities = ["get_ast", "run_query", "find_usage", "get_symbols"]

[mcp_registry.servers.skillz]
type = "uvx"
package = "mcp-skillz"
description = "Skill loading and management"
capabilities = ["list_skills", "load_skill", "apply_skill"]
config = { skills_dir = ".ruler/skills" }

# ═══════════════════════════════════════════════════════════════════════════════
# AGENT CONFIGURATIONS - All Agents Get All Skills
# ═══════════════════════════════════════════════════════════════════════════════

[agents.codex]
trit = 0  # ERGODIC - verification
skills_path = ".codex/skills"
mcp_path = ".codex/mcp.json"
instructions_path = ".codex/AGENTS.md"
skills = ["acsets", "bdd-mathematical-verification", "bisimulation-game", "bmorphism-stars", "borkdude", "cider-clojure", "cider-embedding", "clj-kondo-3color", "codex-self-rewriting", "crdt", "duckdb-temporal-versioning", "epistemic-arbitrage", "frontend-design", "gay-mcp", "geiser-chicken", "glass-bead-game", "hatchery-papers", "mathpix-ocr", "proofgeneral-narya", "rama-gay-clojure", "reafference-corollary-discharge", "rubato-composer", "self-validation-loop", "slime-lisp", "spi-parallel-verify", "squint-runtime", "tailscale-file-transfer", "three-match", "triad-interleave", "unworld", "unworlding-involution", "world-hopping", "xenodium-elisp"]

[agents.claude]
trit = -1  # MINUS - conservative
skills_path = ".claude/skills"
mcp_path = ".claude/mcp.json"
instructions_path = "CLAUDE.md"
skills = ["acsets", "bdd-mathematical-verification", "bisimulation-game", "bmorphism-stars", "borkdude", "cider-clojure", "cider-embedding", "clj-kondo-3color", "codex-self-rewriting", "crdt", "duckdb-temporal-versioning", "epistemic-arbitrage", "frontend-design", "gay-mcp", "geiser-chicken", "glass-bead-game", "hatchery-papers", "mathpix-ocr", "proofgeneral-narya", "rama-gay-clojure", "reafference-corollary-discharge", "rubato-composer", "self-validation-loop", "slime-lisp", "spi-parallel-verify", "squint-runtime", "tailscale-file-transfer", "three-match", "triad-interleave", "unworld", "unworlding-involution", "world-hopping", "xenodium-elisp"]

[agents.amp]
trit = 0  # ERGODIC - neutral
skills_path = ".ruler/skills"
mcp_path = ".mcp.json"
instructions_path = "AGENTS.md"
skills = ["acsets", "bdd-mathematical-verification", "bisimulation-game", "bmorphism-stars", "borkdude", "cider-clojure", "cider-embedding", "clj-kondo-3color", "codex-self-rewriting", "crdt", "duckdb-temporal-versioning", "epistemic-arbitrage", "frontend-design", "gay-mcp", "geiser-chicken", "glass-bead-game", "hatchery-papers", "mathpix-ocr", "proofgeneral-narya", "rama-gay-clojure", "reafference-corollary-discharge", "rubato-composer", "self-validation-loop", "slime-lisp", "spi-parallel-verify", "squint-runtime", "tailscale-file-transfer", "three-match", "triad-interleave", "unworld", "unworlding-involution", "world-hopping", "xenodium-elisp"]

[agents.cursor]
trit = -1  # MINUS - conservative
skills_path = ".cursor/skills"
mcp_path = ".cursor/mcp.json"
instructions_path = ".cursor/rules/AGENTS.md"
skills = ["acsets", "bdd-mathematical-verification", "bisimulation-game", "bmorphism-stars", "borkdude", "cider-clojure", "cider-embedding", "clj-kondo-3color", "codex-self-rewriting", "crdt", "duckdb-temporal-versioning", "epistemic-arbitrage", "frontend-design", "gay-mcp", "geiser-chicken", "glass-bead-game", "hatchery-papers", "mathpix-ocr", "proofgeneral-narya", "rama-gay-clojure", "reafference-corollary-discharge", "rubato-composer", "self-validation-loop", "slime-lisp", "spi-parallel-verify", "squint-runtime", "tailscale-file-transfer", "three-match", "triad-interleave", "unworld", "unworlding-involution", "world-hopping", "xenodium-elisp"]

[agents.copilot]
trit = 1  # PLUS - optimistic
skills_path = ".vscode/skills"
mcp_path = ".vscode/mcp.json"
instructions_path = ".github/copilot-instructions.md"
skills = ["acsets", "bdd-mathematical-verification", "bisimulation-game", "bmorphism-stars", "borkdude", "cider-clojure", "cider-embedding", "clj-kondo-3color", "codex-self-rewriting", "crdt", "duckdb-temporal-versioning", "epistemic-arbitrage", "frontend-design", "gay-mcp", "geiser-chicken", "glass-bead-game", "hatchery-papers", "mathpix-ocr", "proofgeneral-narya", "rama-gay-clojure", "reafference-corollary-discharge", "rubato-composer", "self-validation-loop", "slime-lisp", "spi-parallel-verify", "squint-runtime", "tailscale-file-transfer", "three-match", "triad-interleave", "unworld", "unworlding-involution", "world-hopping", "xenodium-elisp"]

# ═══════════════════════════════════════════════════════════════════════════════
# GF(3) VERIFICATION
# ═══════════════════════════════════════════════════════════════════════════════

[gf3]
triplets = [
  ["codex", "claude", "copilot"],     # 0 + (-1) + 1 = 0 ✓
  ["amp", "cursor", "copilot"],       # 0 + (-1) + 1 = 0 ✓
  ["codex", "claude", "amp"]          # 0 + (-1) + 0 = -1 (balanced by copilot +1)
]

# ═══════════════════════════════════════════════════════════════════════════════
# PROPAGATION COMMANDS
# ═══════════════════════════════════════════════════════════════════════════════

[commands]
propagate = "bb .ruler/propagate.clj"
verify = "bb .ruler/verify.clj"
list_skills = "ls -la .ruler/skills/"
list_servers = "cat .ruler/ai-skills-registry.toml | grep '\\[mcp_registry.servers'"
list_agents = "echo 'Agents: codex, claude, amp, cursor, copilot'"
